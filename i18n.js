const DEBUG = !1; class i18NManager {
    constructor() { this.registry = [{ region: "Global", language: "English", language_code: "en", country_code: null, locale: "en", flag: "", isGlobal: !0 }, { region: "Bulgaria", language: "BÄƒlgarski", language_code: "bg", country_code: "BG", locale: "bg-BG", flag: "ðŸ‡§ðŸ‡¬" }, { region: "Croatia", language: "Hrvatski", language_code: "hr", country_code: "HR", locale: "hr-HR", flag: "ðŸ‡­ðŸ‡·" }, { region: "Czech Republic", language: "ÄŒeÅ¡tina", language_code: "cs", country_code: "CZ", locale: "cs-CZ", flag: "ðŸ‡¨ðŸ‡¿" }, { region: "Denmark", language: "Dansk", language_code: "da", country_code: "DK", locale: "da-DK", flag: "ðŸ‡©ðŸ‡°" }, { region: "Estonia", language: "Eesti keel", language_code: "et", country_code: "EE", locale: "et-EE", flag: "ðŸ‡ªðŸ‡ª" }, { region: "Finland", language: "Suomi", language_code: "fi", country_code: "FI", locale: "fi-FI", flag: "ðŸ‡«ðŸ‡®" }, { region: "France", language: "FranÃ§ais", language_code: "fr", country_code: "FR", locale: "fr-FR", flag: "ðŸ‡«ðŸ‡·" }, { region: "Germany", language: "Deutsch", language_code: "de", country_code: "DE", locale: "de-DE", flag: "ðŸ‡©ðŸ‡ª" }, { region: "Hungary", language: "Magyar", language_code: "hu", country_code: "HU", locale: "hu-HU", flag: "ðŸ‡­ðŸ‡º" }, { region: "Italy", language: "Italiano", language_code: "it", country_code: "IT", locale: "it-IT", flag: "ðŸ‡®ðŸ‡¹" }, { region: "Latvia", language: "Latviski", language_code: "lv", country_code: "LV", locale: "lv-LV", flag: "ðŸ‡±ðŸ‡»" }, { region: "Lithuania", language: "Lietuvis", language_code: "lt", country_code: "LT", locale: "lt-LT", flag: "ðŸ‡±ðŸ‡¹" }, { region: "Netherlands", language: "Nederlands", language_code: "nl", country_code: "NL", locale: "nl-NL", flag: "ðŸ‡³ðŸ‡±" }, { region: "Norway", language: "Norsk", language_code: "nb", country_code: "NO", locale: "nb-NO", flag: "ðŸ‡³ðŸ‡´" }, { region: "Poland", language: "Polski", language_code: "pl", country_code: "PL", locale: "pl-PL", flag: "ðŸ‡µðŸ‡±" }, { region: "Portugal", language: "PortuguÃªs", language_code: "pt", country_code: "PT", locale: "pt-PT", flag: "ðŸ‡µðŸ‡¹" }, { region: "Romania", language: "RomÃ¢nÄƒ", language_code: "ro", country_code: "RO", locale: "ro-RO", flag: "ðŸ‡·ðŸ‡´" }, { region: "Serbia", language: "Srpski", language_code: "sr", country_code: "RS", locale: "sr-RS", flag: "ðŸ‡·ðŸ‡¸" }, { region: "Slovakia", language: "SlovenskÃ½", language_code: "sk", country_code: "SK", locale: "sk-SK", flag: "ðŸ‡¸ðŸ‡°" }, { region: "Slovenia", language: "SlovenÅ¡Äina", language_code: "sl", country_code: "SI", locale: "sl-SI", flag: "ðŸ‡¸ðŸ‡®" }, { region: "Spain", language: "EspaÃ±ol", language_code: "es", country_code: "ES", locale: "es-ES", flag: "ðŸ‡ªðŸ‡¸" }, { region: "Sweden", language: "Svenska", language_code: "sv", country_code: "SE", locale: "sv-SE", flag: "ðŸ‡¸ðŸ‡ª" }, { region: "Ukraine", language: "Ukrayinsâ€™ka", language_code: "uk", country_code: "UA", locale: "uk-UA", flag: "ðŸ‡ºðŸ‡¦" }]; this.currentLanguage = "en"; this.translations = {}; this.STORAGE_KEY = "uponor-manual-lang" } init() { const savedLang = localStorage.getItem(this.STORAGE_KEY), browserLang = this.detectBrowserLanguage(); this.currentLanguage = savedLang || browserLang || "en"; this.loadTranslations(this.currentLanguage); this.renderLanguageSelector(); this.translatePage() } detectBrowserLanguage() { const lang = navigator.language || navigator.userLanguage; if (!lang) return null; let match = this.registry.find(l => l.locale.toLowerCase() === lang.toLowerCase()); if (match) return match.locale; const baseLang = lang.split("-")[0].toLowerCase(); match = this.registry.find(l => l.language_code.toLowerCase() === baseLang); return match ? match.locale : null } loadTranslations(locale) { if (typeof TRANSLATIONS !== "undefined" && TRANSLATIONS[locale]) { this.translations = TRANSLATIONS[locale]; return } const baseLang = locale.split("-")[0]; if (typeof TRANSLATIONS !== "undefined" && TRANSLATIONS[baseLang]) { this.translations = TRANSLATIONS[baseLang]; return } this.translations = {} } setLanguage(locale) { if (this.currentLanguage === locale) return; document.body.classList.add("language-changing"); setTimeout(() => { this.currentLanguage = locale; document.documentElement.lang = locale; localStorage.setItem(this.STORAGE_KEY, locale); this.loadTranslations(locale); if (typeof renderStep === "function" && typeof currentStepIndex !== "undefined") renderStep(currentStepIndex); this.translatePage(); this.renderLanguageSelector(); if (typeof updateNavState === "function") updateNavState(currentStepIndex); document.body.classList.remove("language-changing") }, 150) } t(key, defaultValue) { if (this.translations && Object.prototype.hasOwnProperty.call(this.translations, key)) return this.translations[key]; return typeof defaultValue !== "undefined" ? defaultValue : key } translatePage() { const elements = document.querySelectorAll("[data-i18n]"); elements.forEach(el => { const key = el.getAttribute("data-i18n"), translation = this.t(key); if (translation !== key) { const icon = el.querySelector("svg"); if (icon) { const iconHTML = icon.outerHTML; el.innerHTML = `${iconHTML} ${translation}` } else el.innerText = translation } }); const stepTitle = document.getElementById("current-step-title"); if (stepTitle) { const stepId = typeof currentStepIndex !== "undefined" && stepsData[currentStepIndex] ? stepsData[currentStepIndex].id : null; if (stepId) stepTitle.innerText = this.t(`step_${stepId}_title`, stepsData[currentStepIndex].title) } const stepDesc = document.getElementById("current-step-desc"); if (stepDesc) { const stepId = typeof currentStepIndex !== "undefined" && stepsData[currentStepIndex] ? stepsData[currentStepIndex].id : null; if (stepId) stepDesc.innerText = this.t(`step_${stepId}_desc`, stepsData[currentStepIndex].description) } } getDisplayName(item) { if (item.isGlobal) return item.region.toUpperCase(); return item.region } renderLanguageSelector() {
        const containers = document.querySelectorAll(".language-selector-container"); if (0 === containers.length) return; const current = this.registry.find(l => l.locale === this.currentLanguage) || this.registry[0]; containers.forEach(container => {
            const containerSuffix = container.id ? `-${container.id}` : ""; container.innerHTML = `
                <div class="lang-selector">
                    <button class="lang-toggle" aria-expanded="false" aria-label="Select Language">
                        <span class="current-lang-info">
                            ${current.flag ? `<span class="flag-icon">${current.flag}</span>` : ""}
                            <span class="current-lang-name ${current.isGlobal ? "is-global" : ""}">${this.getDisplayName(current)}</span>
                        </span>
                        <span class="chevron">â–¼</span>
                    </button>
                    <div class="lang-dropdown">
                        <div class="lang-search-wrapper">
                            <input type="text" id="lang-search-input${containerSuffix}" name="lang-search-input${containerSuffix}" class="lang-search" placeholder="Search language..." autocomplete="off" aria-label="Search language">
                        </div>
                        <ul class="lang-list">
                            ${this.registry.map(l => `
                                <li class="lang-item ${l.locale === this.currentLanguage ? "active" : ""} ${l.isGlobal ? "global-item" : ""}" data-locale="${l.locale}">
                                    ${l.flag ? `<span class="flag-icon">${l.flag}</span>` : ""}
                                    <span class="lang-text">${this.getDisplayName(l)}</span>
                                </li>
                            `).join("")}
                        </ul>
                    </div>
                </div>
            `; this.attachSelectorEvents(container)
        })
    } attachSelectorEvents(container) { const toggle = container.querySelector(".lang-toggle"), dropdown = container.querySelector(".lang-dropdown"), search = container.querySelector(".lang-search"), list = container.querySelector(".lang-list"); if (!toggle || !dropdown || !search || !list) return; toggle.addEventListener("click", e => { e.stopPropagation(); document.querySelectorAll(".lang-dropdown.show").forEach(d => { if (d !== dropdown) d.classList.remove("show") }); dropdown.classList.toggle("show"); if (dropdown.classList.contains("show")) search.focus() }); search.addEventListener("input", e => { const term = e.target.value.toLowerCase(), items = list.querySelectorAll(".lang-item"); items.forEach(item => { const text = item.textContent.toLowerCase(); item.style.display = text.includes(term) ? "flex" : "none" }) }); list.addEventListener("click", e => { const item = e.target.closest(".lang-item"); if (item) { const locale = item.dataset.locale; this.setLanguage(locale); dropdown.classList.remove("show") } }); const globalClickHandler = e => { if (!container.contains(e.target)) dropdown.classList.remove("show") }; document.addEventListener("click", globalClickHandler) }
} document.addEventListener("DOMContentLoaded", () => { window.i18n = new i18NManager; window.i18n.init() });
